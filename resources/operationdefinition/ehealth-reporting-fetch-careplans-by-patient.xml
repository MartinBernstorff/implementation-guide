<OperationDefinition xmlns="http://hl7.org/fhir">
    <id value="-s-fetch-careplans-by-patient"/>
    <name value="fetch-careplans-by-patient"/>
    <status value="active"/>
    <kind value="operation"/>
    <description value="### Report Contents&#xa;This report contains the following resources:&#xa;- EpisodeOfCare&#xa;- PlanDefinition&#xa;- CarePlan&#xa;- ProcedureRequest&#xa;### Grouping &#xa;This report is grouped by EpisodeOfCare. Each group is returned in a separate JSon file.&#xa;### Parameters&#xa;- organization: Filter on EpisodeOfCare.managingOrganization match&#xa;- period: Filter on CarePlan.period overlap&#xa;### Output&#xa;Output can be found in Binary.content. This is a Base64 encoded .zip file containing JSon files corresponding to the report groups.&#xa;### Example output&#xa;All returned objects are Fhir resources. See the implementation guide for details&#xa;&#xa;    {&#xa;        'EHealthEpisodeOfCare': {&#xa;            'resourceType': 'EpisodeOfCare',&#xa;            'id': '30254',&#xa;            'meta': {&#xa;                'versionId': '1',&#xa;                'profile': ['http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-episodeofcare']&#xa;            },&#xa;            'extension': [{&#xa;                    'url': 'http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-episodeofcare-caremanagerOrganization',&#xa;                    'valueReference': {&#xa;                        'reference': 'https://organization.local.ehealth.sundhed.dk/fhir/Organization/88873'&#xa;                    }&#xa;                }&#xa;            ],&#xa;            'status': 'active',&#xa;            'diagnosis': [{&#xa;                    'condition': {&#xa;                        'reference': 'https://careplan.local.ehealth.sundhed.dk/fhir/Condition/66740'&#xa;                    },&#xa;                    'rank': 1&#xa;                }&#xa;            ],&#xa;            'patient': {&#xa;                'reference': 'https://patient.local.ehealth.sundhed.dk/fhir/Patient/18637'&#xa;            },&#xa;            'managingOrganization': {&#xa;                'reference': 'https://organization.local.ehealth.sundhed.dk/fhir/Organization/16046'&#xa;            },&#xa;            'period': {&#xa;                'start': '1970-01-01T01:00:01+01:00',&#xa;                'end': '1970-01-01T01:01:40+01:00'&#xa;            }&#xa;        },&#xa;        'EHealthCarePlan': [{&#xa;                'resourceType': 'CarePlan',&#xa;                'id': '1597',&#xa;                'meta': {&#xa;                    'versionId': '1',&#xa;                    'profile': ['http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-careplan']&#xa;                },&#xa;                'definition': [{&#xa;                        'reference': 'https://plan.local.ehealth.sundhed.dk/fhir/PlanDefinition/59578'&#xa;                    }&#xa;                ],&#xa;                'status': 'draft',&#xa;                'intent': 'option',&#xa;                'category': [{&#xa;                        'coding': [{&#xa;                                'system': 'http://ehealth.sundhed.dk/cs/careplan-category',&#xa;                                'code': 'TBD'&#xa;                            }&#xa;                        ]&#xa;                    }&#xa;                ],&#xa;                'subject': {&#xa;                    'reference': 'https://patient.local.ehealth.sundhed.dk/fhir/Patient/57779'&#xa;                },&#xa;                'context': {&#xa;                    'reference': 'https://careplan.local.ehealth.sundhed.dk/fhir/EpisodeOfCare/30254'&#xa;                },&#xa;                'period': {&#xa;                    'start': '1970-01-01T01:00:01+01:00',&#xa;                    'end': '1970-01-01T01:01:40+01:00'&#xa;                },&#xa;                'addresses': [{&#xa;                        'reference': 'https://careplan.local.ehealth.sundhed.dk/fhir/Condition/74721'&#xa;                    }&#xa;                ],&#xa;                'activity': [{&#xa;                        'reference': {&#xa;                            'reference': 'https://careplan.local.ehealth.sundhed.dk/fhir/ProcedureRequest/76916'&#xa;                        }&#xa;                    }&#xa;                ]&#xa;            }&#xa;        ],&#xa;        'EHealthPlanDefinition': [{&#xa;                'resourceType': 'PlanDefinition',&#xa;                'id': '59578',&#xa;                'meta': {&#xa;                    'versionId': '1',&#xa;                    'profile': ['http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-plandefinition']&#xa;                },&#xa;                'extension': [{&#xa;                        'url': 'http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-modifier-role',&#xa;                        'extension': [{&#xa;                                'url': 'reference',&#xa;                                'valueReference': {&#xa;                                    'reference': 'https://organization.local.ehealth.sundhed.dk/fhir/Organization/41757'&#xa;                                }&#xa;                            }, {&#xa;                                'url': 'role',&#xa;                                'valueCodeableConcept': {&#xa;                                    'coding': [{&#xa;                                            'system': 'http://ehealth.sundhed.dk/cs/modifier-role',&#xa;                                            'code': 'owner'&#xa;                                        }&#xa;                                    ]&#xa;                                }&#xa;                            }&#xa;                        ]&#xa;                    }&#xa;                ],&#xa;                'version': 'c701b8e8-abe6-41bd-9db5-c05b94bc1e2b',&#xa;                'status': 'active'&#xa;            }&#xa;        ],&#xa;        'EHealthProcedureRequest': [{&#xa;                'resourceType': 'ProcedureRequest',&#xa;                'id': '76916',&#xa;                'meta': {&#xa;                    'versionId': '1',&#xa;                    'profile': ['http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-procedurerequest']&#xa;                },&#xa;                'extension': [{&#xa;                        'url': 'http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-sharingPolicy',&#xa;                        'valueCodeableConcept': {&#xa;                            'coding': [{&#xa;                                    'system': 'http://ehealth.sundhed.dk/cs/measurement-sharing-policies',&#xa;                                    'code': 'TBD'&#xa;                                }&#xa;                            ]&#xa;                        }&#xa;                    }&#xa;                ],&#xa;                'definition': [{&#xa;                        'reference': 'https://plan.local.ehealth.sundhed.dk/fhir/ActivityDefinition/13593'&#xa;                    }&#xa;                ],&#xa;                'status': 'completed',&#xa;                'intent': 'filler-order',&#xa;                'code': {&#xa;                    'coding': [{&#xa;                            'system': 'http://ehealth.sundhed.dk/cs/activitydefinition-code',&#xa;                            'code': 'TBD'&#xa;                        }&#xa;                    ],&#xa;                    'text': '31d136f2-0b98-4e0a-8f82-f0731b54893d'&#xa;                },&#xa;                'subject': {&#xa;                    'reference': 'https://patient.local.ehealth.sundhed.dk/fhir/Patient/49397'&#xa;                },&#xa;                'context': {&#xa;                    'reference': 'https://careplan.local.ehealth.sundhed.dk/fhir/EpisodeOfCare/72791'&#xa;                }&#xa;            }&#xa;        ]&#xa;    }&#xa;"/>
    <idempotent value="false"/>
    <code value="fetch-careplans-by-patient"/>
    <system value="true"/>
    <type value="false"/>
    <instance value="false"/>
    <parameter>
        <name value="anonymization"/>
        <use value="in"/>
        <min value="1"/>
        <max value="1"/>
        <type value="string"/>
    </parameter>
    <parameter>
        <name value="organization"/>
        <use value="in"/>
        <min value="0"/>
        <max value="1"/>
        <type value="Reference"/>
    </parameter>
    <parameter>
        <name value="period"/>
        <use value="in"/>
        <min value="0"/>
        <max value="1"/>
        <type value="Period"/>
    </parameter>
    <parameter>
        <name value="return"/>
        <use value="out"/>
        <min value="0"/>
        <max value="1"/>
        <type value="Binary"/>
    </parameter>
</OperationDefinition>