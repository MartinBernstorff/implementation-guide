<OperationDefinition xmlns="http://hl7.org/fhir">
   <id value="-s-search-measurements"/>
   <name value="search-measurements"/>
   <status value="active"/>
   <kind value="operation"/>
   <description value="The search-measurements operation searches for bundles of related resources having Observations, Media or QuestionnaireResponses matching the search criteria.&#xa;&#xa;&#xa;### Parameter description&#xa;- patient: Find resource(s) referring the specified patient - Reference(eHealth Patient).&#xa;- episodeOfCare: Find resource(s) referring the specified episode of care - Reference(eHealth EpisodeOfCare).&#xa;- device: Find resource(s) referring the specified device - Reference(eHealth Device | eHealth DeviceMetric).&#xa;- period: Resource(s) must have either an instant or time period within or overlapping the given period. The used instant/time period varies with resource as follows: Element effective for eHealth Observation; Element authored for eHealth QuestionnaireResponse; Element occurrence for eHealth Media.&#xa;- based-on: Resources(s) must be based on any of the specified procedure requests - Reference(eHealth ProcedureRequest).&#xa;&#xa;&#xa;&quot;period&quot; must always be specified.&#xa;&#xa;Additionally at least &quot;patient&quot; or &quot;episodeOfCare&quot; must be specified.&#xa;&#xa;### Output description&#xa;&#xa;The result of this operation will return a Bundle with a list of nested Bundles having resources matching the search parameters.&#xa;&#xa;Each of the nested bundles will contain the full set of related eHealth Observation, eHealth Media, eHealth QuestionnaireResponse and eHealth Provenance resources.&#xa;&#xa;If a eHealth QuestionnaireResponse is part of the nested bundle the referenced eHealth Questionnaire will also be included in the nested bundle.&#xa;&#xa;Related resources are the set of resources created by a single invocation of the submit-measurement operation.&#xa;&#xa;"/>
   <idempotent value="true"/>
   <code value="search-measurements"/>
   <system value="true"/>
   <type value="false"/>
   <instance value="false"/>
   <parameter>
      <name value="patient"/>
      <use value="in"/>
      <min value="0"/>
      <max value="1"/>
      <type value="Reference"/>
   </parameter>
   <parameter>
      <name value="episodeOfCare"/>
      <use value="in"/>
      <min value="0"/>
      <max value="1"/>
      <type value="Reference"/>
   </parameter>
   <parameter>
      <name value="device"/>
      <use value="in"/>
      <min value="0"/>
      <max value="1"/>
      <type value="Reference"/>
   </parameter>
   <parameter>
      <name value="period"/>
      <use value="in"/>
      <min value="1"/>
      <max value="1"/>
      <type value="Period"/>
   </parameter>
   <parameter>
      <name value="based-on"/>
      <use value="in"/>
      <min value="0"/>
      <max value="*"/>
      <type value="Reference"/>
   </parameter>
   <parameter>
      <name value="bundle"/>
      <use value="out"/>
      <min value="0"/>
      <max value="1"/>
      <type value="Bundle"/>
   </parameter>
</OperationDefinition>