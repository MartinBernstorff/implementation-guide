<?xml version="1.0" encoding="utf-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
  <id value="ehealth-quality" />
  <url value="http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-quality" />
  <name value="quality" />
  <status value="draft" />
  <publisher value="ehealth.sundhed.dk" />
  <description value="Minimum required or actually assessed quality values. The qualityType element states the type of quality. For different values of qualityType the required or assessed quality value (qualityCode) must be from different value sets. The relation between qualityType and allowed value sets are defined in the definition of value set http://ehealth.sundhed.dk/vs/quality-types." />
  <fhirVersion value="3.0.1" />
  <kind value="complex-type" />
  <abstract value="false" />
  <contextType value="resource" />
  <context value="Media" />
  <context value="QuestionnaireResponse" />
  <context value="Observation" />
  <context value="ActivityDefinition" />
  <type value="Extension" />
  <baseDefinition value="http://hl7.org/fhir/StructureDefinition/Extension" />
  <derivation value="constraint" />
  <differential>
    <element id="Extension">
      <path value="Extension" />
      <short value="Minimum requirements for qualities" />
      <definition value="The minimum requirements for qualities" />
    </element>
    <element id="Extension.extension">
      <path value="Extension.extension" />
      <slicing>
        <discriminator>
          <type value="value" />
          <path value="url" />
        </discriminator>
        <rules value="open" />
      </slicing>
    </element>
    <element id="Extension.extension:qualityType">
      <path value="Extension.extension" />
      <sliceName value="qualityType" />
      <short value="Type of quality. qualityCode must have value from value set according to the value of qualityType." />
      <definition value="Type of quality. Use valueset for quality code according to type of quality:&#xD;&#xA;Situation Quality - http://ehealth.sundhed.dk/vs/situation-quality&#xD;&#xA;Device Measuring Quality - http://ehealth.sundhed.dk/vs/device-measuring-quality&#xD;&#xA;Usage Quality - http://ehealth.sundhed.dk/vs/usage-quality" />
      <min value="1" />
      <max value="1" />
    </element>
    <element id="Extension.extension:qualityType.url">
      <path value="Extension.extension.url" />
      <fixedUri value="qualityType" />
    </element>
    <element id="Extension.extension:qualityType.value[x]:valueCodeableConcept">
      <path value="Extension.extension.valueCodeableConcept" />
      <sliceName value="valueCodeableConcept" />
      <min value="1" />
      <type>
        <code value="CodeableConcept" />
      </type>
      <binding>
        <strength value="required" />
        <description value="Type of quality" />
        <valueSetReference>
          <reference value="http://ehealth.sundhed.dk/vs/quality-types" />
        </valueSetReference>
      </binding>
    </element>
    <element id="Extension.extension:qualityCode">
      <path value="Extension.extension" />
      <sliceName value="qualityCode" />
      <short value="Assessed value of quality. Value must be from value set related to qualityType." />
      <definition value="Assessed value of quality. Depending on type of quality:&#xD;&#xA;http://ehealth.sundhed.dk/vs/usage-quality&#xD;&#xA;http://ehealth.sundhed.dk/vs/device-measuring-quality&#xD;&#xA;http://ehealth.sundhed.dk/vs/situation-quality" />
      <min value="1" />
      <max value="1" />
    </element>
    <element id="Extension.extension:qualityCode.url">
      <path value="Extension.extension.url" />
      <fixedUri value="qualityCode" />
    </element>
    <element id="Extension.extension:qualityCode.value[x]:valueCodeableConcept">
      <path value="Extension.extension.valueCodeableConcept" />
      <sliceName value="valueCodeableConcept" />
      <short value="Included ValueSets: Usage quality (http://ehealth.sundhed.dk/vs/usage-quality), device measuring quality (http://ehealth.sundhed.dk/vs/device-measuring-quality) and situation quality (http://ehealth.sundhed.dk/vs/situation-quality)" />
      <definition value="Included ValueSets: Usage quality (http://ehealth.sundhed.dk/vs/usage-quality), device measuring quality (http://ehealth.sundhed.dk/vs/device-measuring-quality) and situation quality (http://ehealth.sundhed.dk/vs/situation-quality)" />
      <min value="1" />
      <type>
        <code value="CodeableConcept" />
      </type>
    </element>
    <element id="Extension.url">
      <path value="Extension.url" />
      <fixedUri value="http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-quality" />
    </element>
    <element id="Extension.value[x]">
      <path value="Extension.value[x]" />
      <max value="0" />
    </element>
  </differential>
</StructureDefinition>